{"version":3,"file":"HMSInAppPurchases.js","sourceRoot":"","sources":["../src/www/HMSInAppPurchases.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;EAcE;;;AAEF,mCAAoC;AAEpC,SAAgB,UAAU,CACxB,iBAA2B;IAE3B,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,YAAY;QACZ,EAAE,iBAAiB,EAAE,iBAAiB,EAAE;KACzC,CAAC,CAAC;AACL,CAAC;AAPD,gCAOC;AACD,SAAgB,kBAAkB;IAChC,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,oBAAoB;KACrB,CAAC,CAAC;AACL,CAAC;AAJD,gDAIC;AACD,SAAgB,oBAAoB,CAClC,qBAAwC;IAExC,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,sBAAsB;QACtB,qBAAqB;KACtB,CAAC,CAAC;AACL,CAAC;AAPD,oDAOC;AACD,SAAgB,iBAAiB,CAC/B,kBAAkC;IAElC,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,mBAAmB;QACnB,kBAAkB;KACnB,CAAC,CAAC;AACL,CAAC;AAPD,8CAOC;AACD,SAAgB,oBAAoB,CAClC,qBAAwC;IAExC,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,sBAAsB;QACtB,qBAAqB;KACtB,CAAC,CAAC;AACL,CAAC;AAPD,oDAOC;AACD,SAAgB,oBAAoB,CAClC,2BAAoD;IAEpD,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,sBAAsB;QACtB,2BAA2B;KAC5B,CAAC,CAAC;AACL,CAAC;AAPD,oDAOC;AACD,SAAgB,yBAAyB,CACvC,qBAAwC;IAExC,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,2BAA2B;QAC3B,qBAAqB;KACtB,CAAC,CAAC;AACL,CAAC;AAPD,8DAOC;AACD,SAAgB,gBAAgB,CAC9B,uBAA4C;IAE5C,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,kBAAkB;QAClB,uBAAuB;KACxB,CAAC,CAAC;AACL,CAAC;AAPD,4CAOC;AACD,SAAgB,YAAY;IAC1B,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC;AAC5E,CAAC;AAFD,oCAEC;AACD,SAAgB,aAAa;IAC3B,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;AAC7E,CAAC;AAFD,sCAEC;AACD,SAAgB,qBAAqB;IACnC,OAAO,IAAA,iBAAS,EAAC,mBAAmB,EAAE,gBAAgB,EAAE;QACtD,uBAAuB;KACxB,CAAC,CAAC;AACL,CAAC;AAJD,sDAIC;AAqHD,IAAY,sBAEX;AAFD,WAAY,sBAAsB;IAChC,qFAA2D,CAAA;AAC7D,CAAC,EAFW,sBAAsB,GAAtB,8BAAsB,KAAtB,8BAAsB,QAEjC","sourcesContent":["/*\r\n    Copyright 2020-2022. Huawei Technologies Co., Ltd. All rights reserved.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\")\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n        https://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\nimport { asyncExec } from \"./utils\";\r\n\r\nexport function isEnvReady(\r\n  isSupportAppTouch?: boolean\r\n): Promise<IsEnvReadyResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"isEnvReady\",\r\n    { isSupportAppTouch: isSupportAppTouch },\r\n  ]);\r\n}\r\nexport function isSandboxActivated(): Promise<IsSandboxActivatedResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"isSandboxActivated\",\r\n  ]);\r\n}\r\nexport function obtainOwnedPurchases(\r\n  ownedPurchasesRequest: OwnedPurchasesReq\r\n): Promise<OwnedPurchasesResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"obtainOwnedPurchases\",\r\n    ownedPurchasesRequest,\r\n  ]);\r\n}\r\nexport function obtainProductInfo(\r\n  productInfoRequest: ProductInfoReq\r\n): Promise<ProductInfoResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"obtainProductInfo\",\r\n    productInfoRequest,\r\n  ]);\r\n}\r\nexport function createPurchaseIntent(\r\n  purchaseIntentRequest: PurchaseIntentReq\r\n): Promise<PurchaseIntentResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"createPurchaseIntent\",\r\n    purchaseIntentRequest,\r\n  ]);\r\n}\r\nexport function consumeOwnedPurchase(\r\n  consumeOwnedPurchaseRequest: ConsumeOwnedPurchaseReq\r\n): Promise<ConsumeOwnedPurchaseResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"consumeOwnedPurchase\",\r\n    consumeOwnedPurchaseRequest,\r\n  ]);\r\n}\r\nexport function obtainOwnedPurchaseRecord(\r\n  ownedPurchasesRequest: OwnedPurchasesReq\r\n): Promise<OwnedPurchasesResult> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"obtainOwnedPurchaseRecord\",\r\n    ownedPurchasesRequest,\r\n  ]);\r\n}\r\nexport function startIapActivity(\r\n  startIapActivityRequest: StartIapActivityReq\r\n): Promise<void> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"startIapActivity\",\r\n    startIapActivityRequest,\r\n  ]);\r\n}\r\nexport function enableLogger(): Promise<void> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\"enableLogger\"]);\r\n}\r\nexport function disableLogger(): Promise<void> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\"disableLogger\"]);\r\n}\r\nexport function enablePendingPurchase(): Promise<void> {\r\n  return asyncExec(\"HMSInAppPurchases\", \"InAppPurchases\", [\r\n    \"enablePendingPurchase\",\r\n  ]);\r\n}\r\n\r\n/**\r\n * INTERFACES\r\n */\r\nexport interface Status {\r\n  errorString: string;\r\n  statusCode: number;\r\n  statusMessage: string;\r\n  hasResolution: boolean;\r\n  isCanceled: boolean;\r\n  isInterrupted: boolean;\r\n  isSuccess: boolean;\r\n  describeContents: number;\r\n}\r\nexport interface IsEnvReadyResult {\r\n  returnCode: number;\r\n  status: Status;\r\n  country: string;\r\n  carrierId: string;\r\n}\r\nexport interface IsSandboxActivatedResult {\r\n  returnCode: number;\r\n  errMsg: string;\r\n  isSandboxUser: boolean;\r\n  isSandboxApk: boolean;\r\n  versionInApk: string;\r\n  versionFrMarket: string;\r\n  status: Status;\r\n}\r\nexport interface OwnedPurchasesReq {\r\n  signatureAlgorithm?: string;\r\n  priceType: number;\r\n  continuationToken?: string;\r\n}\r\nexport interface OwnedPurchasesResult {\r\n  signatureAlgorithm?: string;\r\n  continuationToken: string;\r\n  errMsg: string;\r\n  itemList: string[];\r\n  inAppPurchaseDataList: string[];\r\n  inAppSignature: string[];\r\n  placedInappPurchaseDataList: string[];\r\n  placedInappSignatureList: string[];\r\n  returnCode: number;\r\n  status: Status;\r\n}\r\nexport interface ProductInfoReq {\r\n  priceType: number;\r\n  productList: string[];\r\n}\r\nexport interface ProductInfoResult {\r\n  returnCode: number;\r\n  errMsg: string;\r\n  productInfoList: ProductInfo[];\r\n  status: Status;\r\n}\r\nexport interface ProductInfo {\r\n  productId: string;\r\n  priceType: number;\r\n  price: string;\r\n  microsPrice: number;\r\n  originalLocalPrice: string;\r\n  originalMicroPrice: number;\r\n  currency: string;\r\n  productName: string;\r\n  productDesc: string;\r\n  subSpecialPriceMicros: number;\r\n  subSpecialPeriodCycles: number;\r\n  subProductLevel: number;\r\n  status: number;\r\n  offerUsedStatus: number;\r\n  subGroupTitle: string;\r\n  subPeriod: string;\r\n  subSpecialPeriod: string;\r\n  subSpecialPrice: string;\r\n  subFreeTrialPeriod: string;\r\n  subGroupId: string;\r\n}\r\nexport interface PurchaseIntentReq {\r\n  signatureAlgorithm?: string;\r\n  priceType: number;\r\n  productId: string;\r\n  developerPayload: string;\r\n  reservedInfor: string;\r\n}\r\nexport interface PurchaseIntentResult {\r\n  returnCode: number;\r\n  errMsg: string;\r\n  signatureAlgorithm?: string;\r\n  status: Status;\r\n}\r\n\r\nexport interface PurchaseResultInfo {\r\n  returnCode: number;\r\n  errMsg: string;\r\n  inAppPurchaseData: string;\r\n  inAppDataSignature: string;\r\n  signatureAlgorithm?: string;\r\n}\r\nexport interface ConsumeOwnedPurchaseReq {\r\n  signatureAlgorithm?: string;\r\n  inAppPurchaseData: string;\r\n  developerChallenge: string;\r\n}\r\nexport interface ConsumeOwnedPurchaseResult {\r\n  signatureAlgorithm?: string;\r\n  consumePurchaseData: string;\r\n  dataSignature: string;\r\n  errMsg: string;\r\n  returnCode: number;\r\n  status: Status;\r\n}\r\nexport interface StartIapActivityReq {\r\n  productId?: string;\r\n}\r\n\r\nexport enum SignAlgorithmConstants {\r\n  SIGNATURE_ALGORITHM_SHA256WITHRSA_PSS = \"SHA256WithRSA/PSS\",\r\n}\r\n"]}