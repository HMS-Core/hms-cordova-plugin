{"version":3,"file":"HMSMap.js","sourceRoot":"","sources":["../src/www/HMSMap.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n    Copyright 2020-2021. Huawei Technologies Co., Ltd. All rights reserved.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\")\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n        https://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\nimport { asyncExec, Rect, initalPropsOf } from './utils';\r\nimport {\r\n    CameraPosition,\r\n    CameraUpdate,\r\n    CancelableCallback,\r\n    CircleOptions,\r\n    ComputeDistanceResult,\r\n    ErrorCodes,\r\n    GroundOverlayOptions,\r\n    HuaweiMap,\r\n    HuaweiMapOptions,\r\n    InfoWindowAdapter,\r\n    LatLng,\r\n    LatLngBounds,\r\n    LocationSource,\r\n    MapEvent,\r\n    MapType,\r\n    MarkerOptions,\r\n    Point,\r\n    PolygonOptions,\r\n    PolylineOptions,\r\n    Projection,\r\n    RepetitiveTile,\r\n    SnapshotResult,\r\n    TileOverlayOptions,\r\n    TileType,\r\n    UiSettings,\r\n    URLTile,\r\n    VisibleRegion\r\n} from './interfaces';\r\nimport { Circle, CircleImpl } from './circle';\r\nimport { Marker, MarkerImpl } from './marker';\r\nimport { GroundOverlay, GroundOverlayImpl } from './groundOverlay';\r\nimport { TileOverlay, TileOverlayImpl } from './tileOverlay';\r\nimport { Polygon, PolygonImpl } from './polygon';\r\nimport { Polyline, PolylineImpl } from './polyline';\r\n\r\nexport { Polyline, ButtCap, CustomCap, RoundCap, SquareCap, Cap } from './polyline';\r\nexport { Polygon } from './polygon';\r\nexport { Circle } from './circle';\r\nexport { TileOverlay } from './tileOverlay';\r\nexport { GroundOverlay } from './groundOverlay';\r\nexport { Marker } from './marker';\r\nexport {\r\n    AnimationSet,\r\n    RotateAnimation,\r\n    AlphaAnimation,\r\n    ScaleAnimation,\r\n    TranslateAnimation,\r\n    InterpolatorType,\r\n    ErrorCodes,\r\n    CameraMoveStartedReason,\r\n    Color,\r\n    MapType,\r\n    MapEvent,\r\n    JointType,\r\n    Hue,\r\n    PatternItemType,\r\n    HuaweiMap,\r\n    CameraUpdate,\r\n    Tile,\r\n    URLTile,\r\n    RepetitiveTile,\r\n    TileType\r\n} from './interfaces';\r\n\r\nexport const maps: Map<number, HuaweiMap> = new Map<number, HuaweiMapImpl>();\r\n\r\nexport function sync(mapId: number, mapDiv: string, components: any) {\r\n\r\n    if (!maps.has(mapId)) {\r\n        const huaweiMap: HuaweiMap = new HuaweiMapImpl(mapDiv, mapId);\r\n        maps.set(mapId, huaweiMap);\r\n    }\r\n\r\n    const map = maps.get(mapId);\r\n    const hashMap = (<HuaweiMapImpl>map).components;\r\n\r\n    for (let i = 0; i < components.length; i++) {\r\n\r\n        if (hashMap.has(components[i]['_id'])) continue;\r\n\r\n        let obj = null;\r\n        let id: string = components[i]['_id'];\r\n\r\n        if (components[i]['_type'] === \"circle\")\r\n            obj = new CircleImpl(mapDiv, mapId, id);\r\n        else if (components[i]['_type'] === 'marker')\r\n            obj = new MarkerImpl(mapDiv, mapId, id);\r\n        else if (components[i]['_type'] === 'polygon')\r\n            obj = new PolygonImpl(mapDiv, mapId, id);\r\n        else if (components[i]['_type'] === 'polyline')\r\n            obj = new PolylineImpl(mapDiv, mapId, id);\r\n        else if (components[i]['_type'] === 'groundOverlay')\r\n            obj = new GroundOverlayImpl(mapDiv, mapId, id);\r\n        else if (components[i]['_type'] === 'tileOverlay')\r\n            obj = new TileOverlayImpl(mapDiv, mapId, id);\r\n\r\n        hashMap.set(components[i]['_id'], obj);\r\n    }\r\n}\r\n\r\n\r\nexport async function getMap(divId: string, huaweiMapOptions: HuaweiMapOptions): Promise<HuaweiMap> {\r\n    const mapElement = document.getElementById(divId);\r\n    if (!mapElement) return Promise.reject(ErrorCodes.toString(ErrorCodes.NO_DOM_ELEMENT_FOUND));\r\n\r\n    const initialProps = initalPropsOf(mapElement);\r\n\r\n    const mapId = await asyncExec('HMSMap', 'initMap', [divId, { 'mapOptions': huaweiMapOptions, 'initialProps': initialProps }]);\r\n    const huaweiMap: HuaweiMap = new HuaweiMapImpl(divId, mapId);\r\n    maps.set(huaweiMap.getId(), huaweiMap);\r\n    return huaweiMap;\r\n}\r\n\r\nexport async function showMap(divId: string): Promise<HuaweiMap> {\r\n    if (!document.getElementById(divId)) return Promise.reject(ErrorCodes.toString(ErrorCodes.NO_DOM_ELEMENT_FOUND));\r\n    const mapId = await asyncExec(\"HMSMap\", \"showMap\", [divId]);\r\n    const currentMap: HuaweiMap | undefined = maps.get(mapId);\r\n    if (currentMap == undefined) return Promise.reject(ErrorCodes.toString(ErrorCodes.NO_DOM_ELEMENT_FOUND));\r\n    currentMap.startOverlayInterval();\r\n    currentMap.startObserver();\r\n    return currentMap;\r\n}\r\n\r\nexport async function hasPermission(): Promise<boolean> {\r\n    const json = await asyncExec(\"HMSMap\", \"hasPermission\", []);\r\n    return json.result;\r\n}\r\n\r\nexport async function requestPermission(): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"requestPermission\", []);\r\n}\r\n\r\nexport async function computeDistanceBetween(from: LatLng, to: LatLng): Promise<ComputeDistanceResult> {\r\n    return asyncExec(\"HMSMap\", \"computeDistanceBetween\", [{ \"from\": from, \"to\": to }]);\r\n}\r\n\r\nexport async function setApiKey(apiKey: string): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"setApiKey\", [{ \"apiKey\": apiKey }]);\r\n}\r\n\r\nexport function disableLogger(): Promise<void> {\r\n    return asyncExec('HMSMap', 'disableLogger', []);\r\n}\r\n\r\nexport function enableLogger(): Promise<void> {\r\n    return asyncExec('HMSMap', 'enableLogger', []);\r\n}\r\n\r\ninterface OverlapState {\r\n    rect: Rect;\r\n    visited: boolean;\r\n    count: number;\r\n}\r\n\r\nclass MapOverlayCache {\r\n    private readonly mapDivId: string;\r\n    private readonly mapElement: HTMLElement;\r\n    private lastRectsRecord: Map<string, OverlapState> = new Map();\r\n    private rects: Map<string, OverlapState> = new Map();\r\n    private interval: number = -1;\r\n\r\n    constructor(mapDivId: string, mapElement: HTMLElement) {\r\n        this.mapDivId = mapDivId;\r\n        this.mapElement = mapElement;\r\n    }\r\n\r\n    private syncWithJava() {\r\n        /**\r\n         * Find and send the Rect information of added/updated/deleted HTML Elements which intersects with map.\r\n         */\r\n        let diffToAdd = [];\r\n        let diffToDelete = [];\r\n        for (let [key, value] of this.rects) {\r\n            if(!this.lastRectsRecord.has(key)) {\r\n                diffToAdd.push(value.rect);\r\n            } else {\r\n                this.lastRectsRecord.delete(key);\r\n            }\r\n        }\r\n\r\n        for (let [key, value] of this.lastRectsRecord) {\r\n            diffToDelete.push(value.rect);\r\n        }\r\n\r\n        if(diffToAdd.length>0 || diffToDelete.length>0){\r\n            asyncExec(\"HMSMap\", \"updateOverlappingHTMLElements\", [this.mapDivId, diffToAdd, diffToDelete]);\r\n        }\r\n\r\n        this.lastRectsRecord.clear();\r\n        this.lastRectsRecord = new Map(this.rects);\r\n    }\r\n\r\n    private mapOverlayInterval() {\r\n        this.fillCacheRecursively(document.body);\r\n        this.refreshCache();\r\n        this.syncWithJava();\r\n    }\r\n    private refreshCache() {\r\n        for(let [key, value] of this.rects) {\r\n            if(!value.visited) {\r\n                this.removeRect(key, value);\r\n            } else {\r\n                value.visited = false;\r\n                this.rects.set(key, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    private removeRect(key: string, value: OverlapState) {\r\n        if(value.count > 1) {\r\n            value.count--;\r\n            this.rects.set(key, value);\r\n        } else {\r\n            this.rects.delete(key);\r\n        }\r\n    }\r\n\r\n\r\n    private fillCacheRecursively(element: HTMLElement) {\r\n        for(let i=0; i < element.children.length; i++) {\r\n            this.fillCacheRecursively(<HTMLElement>element.children[i]);\r\n        }\r\n\r\n        if(element.id === this.mapDivId) return;\r\n        const curr: Rect = Rect.fromDomRect(element.getBoundingClientRect());\r\n        const map: Rect = Rect.fromDomRect(this.mapElement.getBoundingClientRect());\r\n\r\n        if(map.intersects(curr) && this.isAboveMap(element)) {\r\n\r\n            let val = this.rects.get(curr.hashCode());\r\n\r\n            if (val == undefined) {\r\n                this.rects.set(curr.hashCode(), {rect: curr, visited: true, count: 1});\r\n            } else {\r\n                val.count = val.visited ? val.count+1 : 1;\r\n                val.visited = true;\r\n                this.rects.set(curr.hashCode(), val);\r\n            }\r\n        }\r\n    }\r\n\r\n    private isAboveMap(element: HTMLElement): boolean {\r\n        const isParentOfMap = element.compareDocumentPosition(this.mapElement) & Node.DOCUMENT_POSITION_CONTAINED_BY;\r\n        const elemZIndex = window.getComputedStyle(element).zIndex;\r\n\r\n        if( !Boolean(isParentOfMap) && !isNaN(parseInt(elemZIndex)) && parseInt(elemZIndex) > 0)\r\n            return true;\r\n\r\n        const isMapCreatedBefore = element.compareDocumentPosition(this.mapElement) & Node.DOCUMENT_POSITION_PRECEDING;\r\n        return Boolean(isMapCreatedBefore);\r\n    }\r\n\r\n    startInterval(){\r\n        this.interval = setInterval(() => this.mapOverlayInterval(), 100);\r\n    }\r\n\r\n    stopInterval(){\r\n        if(this.interval !== -1)\r\n            clearInterval(this.interval);\r\n    }\r\n}\r\n\r\nclass MapDomChangeListener {\r\n    private readonly mapDivId: string;\r\n    private readonly mapElement: HTMLElement;\r\n    private mapDomChangeObserver: MutationObserver;\r\n    private mapDivRectCache: DOMRect;\r\n\r\n    constructor(mapDivId: string, mapElement: HTMLElement) {\r\n        this.mapDivId = mapDivId;\r\n        this.mapElement = mapElement;\r\n        this.mapDivRectCache = this.mapElement.getBoundingClientRect();\r\n        this.mapDomChangeObserver = this.createObserver();\r\n    }\r\n\r\n    private addWindowResizeListener() {\r\n        window.onresize = () => {this.updateWidthAndHeight()};        \r\n    }\r\n\r\n    private removeWindowResizeListener() {\r\n        window.onresize = null;\r\n    }\r\n\r\n    private createObserver(): MutationObserver {\r\n        return new MutationObserver(mutations => {\r\n            this.updateXAndY();\r\n            this.updateWidthAndHeight();\r\n        });\r\n    }\r\n\r\n    startListener() {\r\n        this.mapDomChangeObserver.observe(document.body, { attributes: true, childList: true, subtree: true });\r\n        this.addWindowResizeListener();\r\n    }\r\n\r\n    stopListener() {\r\n        this.mapDomChangeObserver.disconnect();\r\n        this.removeWindowResizeListener();\r\n    }\r\n\r\n    private updateWidthAndHeight() {\r\n        const width = parseInt(window.getComputedStyle(this.mapElement, null).getPropertyValue('width'));\r\n        const height = parseInt(window.getComputedStyle(this.mapElement, null).getPropertyValue('height'));\r\n        if(this.mapDivRectCache.width != width || this.mapDivRectCache.height != height) {\r\n            this.forceUpdateWidthAndHeight(width, height).then(() => {\r\n                this.mapDivRectCache.width = width;\r\n                this.mapDivRectCache.height = height;\r\n            });\r\n        }\r\n    }\r\n\r\n    private updateXAndY() {\r\n        const mapRect = this.mapElement.getBoundingClientRect();\r\n        const x = mapRect.x;\r\n        const y = mapRect.y;\r\n        if(this.mapDivRectCache.x != x || this.mapDivRectCache.y != y) {\r\n            this.forceUpdateXAndY(x, y).then(() => {\r\n                this.mapDivRectCache.x = x;\r\n                this.mapDivRectCache.y = y;\r\n            });\r\n        }\r\n    }\r\n\r\n    private forceUpdateXAndY(x: number, y: number): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"forceUpdateXAndY\", [this.mapDivId, x, y]);\r\n    }\r\n\r\n    private forceUpdateWidthAndHeight(width: number, height: number): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"forceUpdateWidthAndHeight\", [this.mapDivId, width, height]);\r\n    }\r\n}\r\n\r\nclass HuaweiMapImpl implements HuaweiMap {\r\n\r\n    public readonly components: Map<string, any> = new Map<string, any>();\r\n    private readonly id: number;\r\n    private readonly divId: string;\r\n    private readonly uiSettings: UiSettings;\r\n    private readonly projection: Projection;\r\n    private readonly mapElement: HTMLElement;\r\n    private readonly overlay: MapOverlayCache;\r\n    private readonly mapListener: MapDomChangeListener;\r\n\r\n    constructor(divId: string, mapId: number) {\r\n        console.log(`Huawei map constructed with the div id ${divId} :: and the props ${mapId}`);\r\n        this.id = mapId;\r\n        this.divId = divId;\r\n        this.projection = new ProjectionImpl(divId);\r\n        this.uiSettings = new UiSettingsImpl(divId);\r\n\r\n        const tempElement: HTMLElement | null = document.getElementById(this.divId);\r\n        if (tempElement == null) throw Error(`Specified map div could not find: ${divId}`);\r\n        this.mapElement = tempElement;\r\n        this.overlay = new MapOverlayCache(divId, this.mapElement);\r\n        this.mapListener = new MapDomChangeListener(divId, this.mapElement);\r\n        this.startOverlayInterval();\r\n        this.startObserver();\r\n    }\r\n\r\n    startOverlayInterval(): void {\r\n        this.overlay.startInterval();\r\n    }\r\n\r\n    startObserver(): void {\r\n        this.mapListener.startListener();\r\n    }\r\n\r\n    // IONIC FRAMEWORK SCROLL EVENT\r\n    scroll(): void {\r\n        if (this.mapElement == null) return;\r\n        const mapRect = this.mapElement.getBoundingClientRect();\r\n        this.forceUpdateXAndY(mapRect.x, mapRect.y);\r\n    }\r\n\r\n    async destroyMap(): Promise<void> {\r\n        this.components.clear();\r\n        maps.delete(this.id);\r\n        this.overlay.stopInterval();\r\n        this.mapListener.stopListener();\r\n        return asyncExec(\"HMSMap\", \"destroyMap\", [this.divId]);\r\n    }\r\n\r\n    async hideMap(): Promise<void> {\r\n        this.overlay.stopInterval();\r\n        this.mapListener.startListener();\r\n        return asyncExec(\"HMSMap\", \"hideMap\", [this.divId]);\r\n    }\r\n\r\n    async on(event: MapEvent, callback: (val: any) => void): Promise<void> {\r\n        const fixedFunctionNameForJavaScript: string = `${event}_${this.id}`;\r\n        const fixedFunctionNameForJava: string = `set${event[0].toUpperCase()}${event.substr(1)}Listener`;\r\n        return asyncExec('HMSMap', 'mapOptions', [this.divId, 'setListener', fixedFunctionNameForJava, { 'content': callback.toString() }])\r\n            .then(value => {\r\n                window.subscribeHMSEvent(fixedFunctionNameForJavaScript, callback);\r\n            }).catch(err => console.log(err));\r\n    }\r\n\r\n    async setMapPointersEnabled(mapPointersEnabled: boolean): Promise<void> {\r\n        return asyncExec('HMSMap', 'setMapPointersEnabled', [this.divId, mapPointersEnabled]);\r\n    }\r\n\r\n    async isMapPointersEnabled(): Promise<boolean> {\r\n        const json = await asyncExec('HMSMap', 'isMapPointersEnabled', [this.divId]);\r\n        return json.result;\r\n    }\r\n\r\n    async addCircle(circleOptions: CircleOptions): Promise<Circle> {\r\n        if (!circleOptions[\"center\"]) return Promise.reject(ErrorCodes.toString(ErrorCodes.CENTER_PROPERTY_MUST_DEFINED));\r\n        const componentId = await asyncExec('HMSMap', 'addComponent', [this.divId, \"CIRCLE\", circleOptions]);\r\n        const circle: Circle = new CircleImpl(this.divId, this.id, componentId);\r\n        this.components.set(circle.getId(), circle);\r\n        return circle;\r\n    }\r\n\r\n    async addMarker(markerOptions: MarkerOptions): Promise<Marker> {\r\n        if (!markerOptions[\"position\"]) return Promise.reject(ErrorCodes.toString(ErrorCodes.POSITION_PROPERTY_MUST_DEFINED));\r\n        const componentId = await asyncExec('HMSMap', 'addComponent', [this.divId, \"MARKER\", markerOptions]);\r\n        const marker: Marker = new MarkerImpl(this.divId, this.id, componentId);\r\n        this.components.set(marker.getId(), marker);\r\n        return marker;\r\n    }\r\n\r\n    async addGroundOverlay(groundOverlayOptions: GroundOverlayOptions): Promise<GroundOverlay> {\r\n        if (!groundOverlayOptions[\"position\"]) return Promise.reject(ErrorCodes.toString(ErrorCodes.POSITION_PROPERTY_MUST_DEFINED));\r\n        const componentId = await asyncExec('HMSMap', 'addComponent', [this.divId, \"GROUND_OVERLAY\", groundOverlayOptions]);\r\n        const groundOverlay: GroundOverlay = new GroundOverlayImpl(this.divId, this.id, componentId);\r\n        this.components.set(groundOverlay.getId(), groundOverlay);\r\n        return groundOverlay;\r\n    }\r\n\r\n    async addTileOverlay(tileOverlayOptions: TileOverlayOptions): Promise<TileOverlay> {\r\n        const componentId = await asyncExec('HMSMap', 'addComponent', [this.divId, \"TILE_OVERLAY\", tileOverlayOptions]);\r\n        const tileOverlay: TileOverlay = new TileOverlayImpl(this.divId, this.id, componentId);\r\n        this.components.set(tileOverlay.getId(), tileOverlay);\r\n        return tileOverlay;\r\n    }\r\n\r\n    async addPolygon(polygonOptions: PolygonOptions): Promise<Polygon> {\r\n        if (!polygonOptions[\"points\"]) return Promise.reject(ErrorCodes.toString(ErrorCodes.POINTS_PROPERTY_MUST_DEFINED));\r\n        const componentId = await asyncExec('HMSMap', 'addComponent', [this.divId, \"POLYGON\", polygonOptions]);\r\n        const polygon: Polygon = new PolygonImpl(this.divId, this.id, componentId);\r\n        this.components.set(polygon.getId(), polygon);\r\n        return polygon;\r\n    }\r\n\r\n    async addPolyline(polylineOptions: PolylineOptions): Promise<Polyline> {\r\n        if (!polylineOptions[\"points\"]) return Promise.reject(ErrorCodes.toString(ErrorCodes.POINTS_PROPERTY_MUST_DEFINED));\r\n        const componentId = await asyncExec('HMSMap', 'addComponent', [this.divId, \"POLYLINE\", polylineOptions]);\r\n        const polyline: Polyline = new PolylineImpl(this.divId, this.id, componentId);\r\n        this.components.set(polyline.getId(), polyline);\r\n        return polyline;\r\n    }\r\n\r\n    animateCamera(cameraUpdate: CameraUpdate): Promise<void>;\r\n    animateCamera(cameraUpdate: CameraUpdate, cancelableCallback: CancelableCallback): Promise<void>;\r\n    animateCamera(cameraUpdate: CameraUpdate, cancelableCallback?: CancelableCallback, durationMs?: number): Promise<void> {\r\n        const onFinishEventForJavascript = `${MapEvent.ON_CANCELABLE_CALLBACK_FINISH}_${this.id}`;\r\n        const onCancelEventForJavascript = `${MapEvent.ON_CANCELABLE_CALLBACK_CANCEL}_${this.id}`;\r\n        const props: any = {};\r\n        if (cancelableCallback != undefined) {\r\n            window.subscribeHMSEvent(onFinishEventForJavascript, cancelableCallback.onFinish);\r\n            window.subscribeHMSEvent(onCancelEventForJavascript, cancelableCallback.onCancel);\r\n            if (cancelableCallback.onFinish != undefined) props[\"isOnFinish\"] = true;\r\n            if (cancelableCallback.onCancel != undefined) props[\"isOnCancel\"] = true;\r\n            if (durationMs) props[\"duration\"] = durationMs;\r\n        }\r\n        return (<CameraUpdateImpl>cameraUpdate).animateCamera(this.divId, props);\r\n    }\r\n\r\n    moveCamera(cameraUpdate: CameraUpdate): Promise<void> {\r\n        return (<CameraUpdateImpl>cameraUpdate).moveCamera(this.divId);\r\n    }\r\n\r\n    clear(): Promise<void> {\r\n        this.components.clear();\r\n        return this.getHuaweiMapOptions('clear');\r\n    }\r\n\r\n    resetMinMaxZoomPreference(): Promise<void> {\r\n        return this.getHuaweiMapOptions('resetMinMaxZoomPreference');\r\n    }\r\n\r\n    stopAnimation(): Promise<void> {\r\n        return this.getHuaweiMapOptions('stopAnimation');\r\n    }\r\n\r\n    getCameraPosition(): Promise<CameraPosition> {\r\n        return this.getHuaweiMapOptions('getCameraPosition');\r\n    }\r\n\r\n    getMapType(): Promise<MapType> {\r\n        return this.getHuaweiMapOptions('getMapType');\r\n    }\r\n\r\n    getMaxZoomLevel(): Promise<number> {\r\n        return this.getHuaweiMapOptions('getMaxZoomLevel');\r\n    }\r\n\r\n    getMinZoomLevel(): Promise<number> {\r\n        return this.getHuaweiMapOptions('getMinZoomLevel');\r\n    }\r\n\r\n    getProjection() {\r\n        return this.projection;\r\n    }\r\n\r\n    getUiSettings(): UiSettings {\r\n        return this.uiSettings;\r\n    }\r\n\r\n    isBuildingsEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions('isBuildingsEnabled');\r\n    }\r\n\r\n    isMyLocationEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions('isMyLocationEnabled');\r\n    }\r\n\r\n    isTrafficEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions('isTrafficEnabled');\r\n    }\r\n\r\n    isIndoorEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions('isIndoorEnabled');\r\n    }\r\n\r\n    setBuildingsEnabled(buildingsEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions('setBuildingsEnabled', { 'buildingsEnabled': buildingsEnabled });\r\n    }\r\n\r\n    setContentDescription(contentDescription: string): Promise<void> {\r\n        return this.setHuaweiMapOptions('setContentDescription', { 'contentDescription': contentDescription });\r\n    }\r\n\r\n    setInfoWindowAdapter(infoWindowAdapter: InfoWindowAdapter): Promise<void> {\r\n        return this.setHuaweiMapOptions('setInfoWindowAdapter', { 'infoWindowAdapter': infoWindowAdapter })\r\n    }\r\n\r\n    setLatLngBoundsForCameraTarget(latLngBounds: LatLngBounds): Promise<void> {\r\n        return this.setHuaweiMapOptions('setLatLngBoundsForCameraTarget', { 'latLngBounds': latLngBounds });\r\n    }\r\n\r\n    setLocationSource(locationSource: LocationSource): Promise<void> {\r\n        return this.setHuaweiMapOptions('setLocationSource', { 'locationSource': locationSource });\r\n    }\r\n\r\n    setMapStyle(mapStyle: MapStyleOptions): Promise<void> {\r\n        return this.setHuaweiMapOptions('setMapStyle', { 'mapStyle': mapStyle.getResourceId() });\r\n    }\r\n\r\n    setMapType(mapType: MapType): Promise<void> {\r\n        return this.setHuaweiMapOptions('setMapType', { 'mapType': mapType });\r\n    }\r\n\r\n    setMarkersClustering(markersClustering: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions('setMarkersClustering', { 'markersClustering': markersClustering });\r\n    }\r\n\r\n    setMaxZoomPreference(maxZoomPreference: number): Promise<void> {\r\n        return this.setHuaweiMapOptions('setMaxZoomPreference', { 'maxZoomPreference': maxZoomPreference });\r\n    }\r\n\r\n    setMinZoomPreference(minZoomPreference: number): Promise<void> {\r\n        return this.setHuaweiMapOptions('setMinZoomPreference', { 'minZoomPreference': minZoomPreference });\r\n    }\r\n\r\n    setMyLocationEnabled(myLocationEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions('setMyLocationEnabled', { 'myLocationEnabled': myLocationEnabled });\r\n    }\r\n\r\n    setPadding(left: number, top: number, right: number, bottom: number): Promise<void> {\r\n        return this.setHuaweiMapOptions('setPadding', { 'left': left, 'top': top, 'right': right, 'bottom': bottom });\r\n    }\r\n\r\n    setTrafficEnabled(trafficEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions('setTrafficEnabled', { 'trafficEnabled': trafficEnabled });\r\n    }\r\n\r\n    setPointToCenter(x: number, y: number): Promise<void> {\r\n        return this.setHuaweiMapOptions('setPointToCenter', { 'x': x, 'y': y });\r\n    }\r\n\r\n    getComponent(key: string): any {\r\n        return this.components.get(key);\r\n    }\r\n\r\n    getId(): number {\r\n        return this.id;\r\n    }\r\n\r\n    snapshot(onReadyCallback: (snapshot: SnapshotResult) => void): Promise<void> {\r\n        const eventName = `${MapEvent.ON_SNAPSHOT_READY_CALLBACK}_${this.id}`;\r\n        window.subscribeHMSEvent(eventName, onReadyCallback);\r\n        return this.getHuaweiMapOptions('snapshot');\r\n    }\r\n\r\n    // INTERNAL INTERNAL INTERNAL\r\n    removeComponent(key: string): void {\r\n        if (this.components.has(key)) {\r\n            this.components.get(key).remove();\r\n            this.components.delete(key);\r\n        } else {\r\n            throw ErrorCodes.toString(ErrorCodes.NO_COMPONENT_EXISTS_GIVEN_ID);\r\n        }\r\n    }\r\n\r\n    private forceUpdateXAndY(x: number, y: number): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"forceUpdateXAndY\", [this.divId, x, y]);\r\n    }\r\n\r\n    private setHuaweiMapOptions(func: string, props: any): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [this.divId, 'setHuaweiMapOptions', func, props]);\r\n    }\r\n\r\n    private async getHuaweiMapOptions(func: string): Promise<any> {\r\n        const result = await asyncExec(\"HMSMap\", \"mapOptions\", [this.divId, 'getHuaweiMapOptions', func, {}]);\r\n        return result.value;\r\n    }\r\n\r\n}\r\n\r\nclass UiSettingsImpl implements UiSettings {\r\n\r\n    private readonly mapDivId: string;\r\n\r\n    constructor(mapDivId: string) {\r\n        this.mapDivId = mapDivId;\r\n    }\r\n\r\n    isCompassEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isCompassEnabled');\r\n    }\r\n\r\n    isIndoorLevelPickerEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isIndoorLevelPickerEnabled');\r\n    }\r\n\r\n    isMapToolbarEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isMapToolbarEnabled');\r\n    }\r\n\r\n    isMyLocationButtonEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isMyLocationButtonEnabled');\r\n    }\r\n\r\n    isRotateGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isRotateGesturesEnabled');\r\n    }\r\n\r\n    isScrollGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isScrollGesturesEnabled');\r\n    }\r\n\r\n    isScrollGesturesEnabledDuringRotateOrZoom(): Promise<boolean> {\r\n        return this.getUiSettings('isScrollGesturesEnabledDuringRotateOrZoom');\r\n    }\r\n\r\n    isTiltGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isTiltGesturesEnabled');\r\n    }\r\n\r\n    isZoomControlsEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isZoomControlsEnabled');\r\n    }\r\n\r\n    isZoomGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings('isZoomGesturesEnabled');\r\n    }\r\n\r\n    setAllGesturesEnabled(allGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setAllGesturesEnabled', { 'allGesturesEnabled': allGesturesEnabled });\r\n    }\r\n\r\n    setCompassEnabled(compassEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setCompassEnabled', { 'compassEnabled': compassEnabled });\r\n\r\n    }\r\n\r\n    setIndoorLevelPickerEnabled(indoorLevelPickerEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setIndoorLevelPickerEnabled', { 'indoorLevelPickerEnabled': indoorLevelPickerEnabled });\r\n    }\r\n\r\n    setMapToolbarEnabled(mapToolbarEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setMapToolbarEnabled', { 'mapToolbarEnabled': mapToolbarEnabled });\r\n    }\r\n\r\n    setMyLocationButtonEnabled(myLocationButtonEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setMyLocationButtonEnabled', { 'myLocationButtonEnabled': myLocationButtonEnabled });\r\n    }\r\n\r\n    setRotateGesturesEnabled(rotateGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setRotateGesturesEnabled\", { 'rotateGesturesEnabled': rotateGesturesEnabled });\r\n    }\r\n\r\n    setScrollGesturesEnabled(scrollGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setScrollGesturesEnabled', { 'scrollGesturesEnabled': scrollGesturesEnabled });\r\n    }\r\n\r\n    setScrollGesturesEnabledDuringRotateOrZoom(scrollGesturesEnabledDuringRotateOrZoom: boolean): Promise<void> {\r\n        return this.setUiSettings('setScrollGesturesEnabledDuringRotateOrZoom', { 'scrollGesturesEnabledDuringRotateOrZoom': scrollGesturesEnabledDuringRotateOrZoom });\r\n    }\r\n\r\n    setTiltGesturesEnabled(tiltGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setTiltGesturesEnabled', { 'tiltGesturesEnabled': tiltGesturesEnabled });\r\n    }\r\n\r\n    setZoomControlsEnabled(zoomControlsEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setZoomControlsEnabled', { 'zoomControlsEnabled': zoomControlsEnabled });\r\n    }\r\n\r\n    setZoomGesturesEnabled(zoomGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setZoomGesturesEnabled', { 'zoomGesturesEnabled': zoomGesturesEnabled });\r\n    }\r\n\r\n    setGestureScaleByMapCenter(gestureScaleByMapCenterEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings('setGestureScaleByMapCenter', { 'gestureScaleByMapCenterEnabled': gestureScaleByMapCenterEnabled });\r\n    }\r\n\r\n    private setUiSettings(func: string, props: any): Promise<void> {\r\n        return asyncExec('HMSMap', 'mapOptions', [this.mapDivId, 'setUiSettings', func, props]);\r\n    }\r\n\r\n    private async getUiSettings(func: string) {\r\n        const result = await asyncExec(\"HMSMap\", \"mapOptions\", [this.mapDivId, 'getUiSettings', func, {}]);\r\n        return result.value;\r\n    }\r\n}\r\n\r\nclass CameraUpdateImpl implements CameraUpdate {\r\n\r\n    props: any;\r\n    event: string = \"\";\r\n\r\n    moveCamera(mapId: string): Promise<any> {\r\n        return asyncExec('HMSMap', 'mapOptions', [mapId, \"moveCamera\", this.event, this.props]);\r\n    }\r\n\r\n    animateCamera(mapId: string, props: any): Promise<any> {\r\n        return asyncExec('HMSMap', 'mapOptions', [mapId, \"animateCamera\", this.event, { ...this.props, ...props }]);\r\n    }\r\n}\r\n\r\nexport class CameraUpdateFactory {\r\n    private constructor() {\r\n    }\r\n\r\n    static newCameraPosition(cameraPosition: CameraPosition): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"newCameraPosition\", { 'cameraPosition': cameraPosition });\r\n    }\r\n\r\n    static newLatLng(latLng: LatLng): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"newLatLng\", { 'latLng': latLng });\r\n    }\r\n\r\n    static newLatLngBounds(latLngBounds: LatLngBounds, padding: number): CameraUpdate;\r\n\r\n    static newLatLngBounds(latLngBounds: LatLngBounds, padding: number, width?: number, height?: number): CameraUpdate {\r\n        let props: any = {};\r\n        props['bounds'] = latLngBounds;\r\n        props['padding'] = padding;\r\n        if (width && height) {\r\n            props['width'] = width;\r\n            props['height'] = height;\r\n        }\r\n        return this.constructCameraUpdateImpl(\"newLatLngBounds\", props);\r\n    }\r\n\r\n    static newLatLngZoom(latLng: LatLng, zoom: number): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"newLatLngZoom\", { \"latLng\": latLng, \"zoom\": zoom });\r\n    }\r\n\r\n    static scrollBy(xPixel: number, yPixel: number): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"scrollBy\", { 'xPixel': xPixel, 'yPixel': yPixel });\r\n    }\r\n\r\n    static zoomBy(amount: number): CameraUpdate;\r\n\r\n    static zoomBy(amount: number, focus?: Point): CameraUpdate {\r\n        let props: any = {};\r\n        props['amount'] = amount;\r\n        if (focus) props['focus'] = focus;\r\n        return this.constructCameraUpdateImpl(\"zoomBy\", props);\r\n    }\r\n\r\n    static zoomIn(): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"zoomIn\", {});\r\n    }\r\n\r\n    static zoomOut(): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"zoomOut\", {});\r\n    }\r\n\r\n    static zoomTo(zoom: number): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"zoomTo\", { \"zoom\": zoom });\r\n    }\r\n\r\n    private static constructCameraUpdateImpl(event: string, props: any): CameraUpdateImpl {\r\n        let cameraUpdate = new CameraUpdateImpl();\r\n        cameraUpdate.event = event;\r\n        cameraUpdate.props = props;\r\n        return cameraUpdate;\r\n    }\r\n}\r\n\r\nclass ProjectionImpl implements Projection {\r\n    private readonly divId: string;\r\n\r\n    constructor(divId: string) {\r\n        this.divId = divId;\r\n    }\r\n\r\n    fromScreenLocation(point: Point): Promise<LatLng> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [this.divId, \"projections\", \"fromScreenLocation\", { \"point\": point }]);\r\n    }\r\n\r\n    getVisibleRegion(): Promise<VisibleRegion> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [this.divId, \"projections\", \"getVisibleRegion\", {}]);\r\n    }\r\n\r\n    toScreenLocation(latLng: LatLng): Promise<Point> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [this.divId, \"projections\", \"toScreenLocation\", { \"latLng\": latLng }]);\r\n    }\r\n}\r\n\r\nexport class MapStyleOptions {\r\n    private readonly resourceId: number;\r\n\r\n    private constructor(resourceId: number) {\r\n        this.resourceId = resourceId;\r\n    }\r\n\r\n    public static loadRawResourceStyle(resourceId: number): MapStyleOptions {\r\n        return new MapStyleOptions(resourceId);\r\n    }\r\n\r\n    getResourceId(): number {\r\n        return this.resourceId;\r\n    }\r\n}\r\n"]}