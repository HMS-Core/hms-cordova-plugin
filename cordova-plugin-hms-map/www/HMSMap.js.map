{"version":3,"file":"HMSMap.js","sourceRoot":"","sources":["../src/www/HMSMap.ts"],"names":[],"mappings":"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","sourcesContent":["/*\r\n    Copyright 2020-2024. Huawei Technologies Co., Ltd. All rights reserved.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\")\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n        https://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\nimport { asyncExec, Rect, initalPropsOf } from \"./utils\";\r\nimport {\r\n    BitmapDescriptor,\r\n    CameraPosition,\r\n    CameraUpdate,\r\n    CancelableCallback,\r\n    CircleOptions,\r\n    ComputeDistanceResult,\r\n    ErrorCodes,\r\n    Gravity,\r\n    GroundOverlayOptions,\r\n    HuaweiMap,\r\n    HuaweiMapOptions,\r\n    InfoWindowAdapter,\r\n    LatLng,\r\n    LatLngBounds,\r\n    LocationSource,\r\n    MapEvent,\r\n    MapType,\r\n    MarkerOptions,\r\n    Point,\r\n    PolygonOptions,\r\n    PolylineOptions,\r\n    Projection,\r\n    RepetitiveTile,\r\n    SnapshotResult,\r\n    TileOverlayOptions,\r\n    TileType,\r\n    UiSettings,\r\n    URLTile,\r\n    VisibleRegion,\r\n    HeatMapOptions,\r\n    LatLngObj,\r\n    LatLngListObj,\r\n    MyLocationStyle\r\n} from \"./interfaces\";\r\nimport { Circle, CircleImpl } from \"./circle\";\r\nimport { Marker, MarkerImpl } from \"./marker\";\r\nimport { GroundOverlay, GroundOverlayImpl } from \"./groundOverlay\";\r\nimport { TileOverlay, TileOverlayImpl } from \"./tileOverlay\";\r\nimport { Polygon, PolygonImpl } from \"./polygon\";\r\nimport { Polyline, PolylineImpl } from \"./polyline\";\r\nimport { HeatMap, HeatMapImpl } from \"./heatMap\";\r\n\r\nexport {\r\n    Polyline,\r\n    ButtCap,\r\n    CustomCap,\r\n    RoundCap,\r\n    SquareCap,\r\n    Cap,\r\n} from \"./polyline\";\r\nexport { Polygon } from \"./polygon\";\r\nexport { Circle } from \"./circle\";\r\nexport { TileOverlay } from \"./tileOverlay\";\r\nexport { GroundOverlay } from \"./groundOverlay\";\r\nexport { Marker } from \"./marker\";\r\nexport {\r\n    AnimationSet,\r\n    RotateAnimation,\r\n    AlphaAnimation,\r\n    ScaleAnimation,\r\n    TranslateAnimation,\r\n    InterpolatorType,\r\n    ErrorCodes,\r\n    CameraMoveStartedReason,\r\n    Color,\r\n    MapType,\r\n    MapEvent,\r\n    JointType,\r\n    Hue,\r\n    PatternItemType,\r\n    HuaweiMap,\r\n    CameraUpdate,\r\n    Tile,\r\n    URLTile,\r\n    RepetitiveTile,\r\n    TileType,\r\n    AnimationConstant,\r\n    Gravity,\r\n    LatLngObj,\r\n    LatLngListObj,\r\n    MyLocationStyle,\r\n} from \"./interfaces\";\r\n\r\nexport const maps: Map<number, HuaweiMap> = new Map<number, HuaweiMapImpl>();\r\n\r\nexport function sync(mapId: number, mapDiv: string, components: any) {\r\n    if (!maps.has(mapId)) {\r\n        const huaweiMap: HuaweiMap = new HuaweiMapImpl(mapDiv, mapId);\r\n        maps.set(mapId, huaweiMap);\r\n    }\r\n\r\n    const map = maps.get(mapId);\r\n    const hashMap = (<HuaweiMapImpl>map).components;\r\n\r\n    for (let i = 0; i < components.length; i++) {\r\n        if (hashMap.has(components[i][\"_id\"])) continue;\r\n\r\n        let obj = null;\r\n        let id: string = components[i][\"_id\"];\r\n\r\n        if (components[i][\"_type\"] === \"circle\")\r\n            obj = new CircleImpl(mapDiv, mapId, id);\r\n        else if (components[i][\"_type\"] === \"marker\")\r\n            obj = new MarkerImpl(mapDiv, mapId, id);\r\n        else if (components[i][\"_type\"] === \"polygon\")\r\n            obj = new PolygonImpl(mapDiv, mapId, id);\r\n        else if (components[i][\"_type\"] === \"polyline\")\r\n            obj = new PolylineImpl(mapDiv, mapId, id);\r\n        else if (components[i][\"_type\"] === \"groundOverlay\")\r\n            obj = new GroundOverlayImpl(mapDiv, mapId, id);\r\n        else if (components[i][\"_type\"] === \"tileOverlay\")\r\n            obj = new TileOverlayImpl(mapDiv, mapId, id);\r\n        else if (components[i][\"_type\"] === \"heatMap\")\r\n            obj = new TileOverlayImpl(mapDiv, mapId, id);\r\n        hashMap.set(components[i][\"_id\"], obj);\r\n    }\r\n}\r\n\r\nexport async function getMap(\r\n    divId: string,\r\n    huaweiMapOptions: HuaweiMapOptions\r\n): Promise<HuaweiMap> {\r\n    const mapElement = document.getElementById(divId);\r\n    if (!mapElement)\r\n        return Promise.reject(\r\n            ErrorCodes.toString(ErrorCodes.NO_DOM_ELEMENT_FOUND)\r\n        );\r\n\r\n    const initialProps = initalPropsOf(mapElement);\r\n\r\n    const mapId = await asyncExec(\"HMSMap\", \"initMap\", [\r\n        divId,\r\n        { mapOptions: huaweiMapOptions, initialProps: initialProps },\r\n    ]);\r\n    const huaweiMap: HuaweiMap = new HuaweiMapImpl(divId, mapId);\r\n    maps.set(huaweiMap.getId(), huaweiMap);\r\n    return huaweiMap;\r\n}\r\n\r\nexport async function showMap(divId: string): Promise<HuaweiMap> {\r\n    if (!document.getElementById(divId))\r\n        return Promise.reject(\r\n            ErrorCodes.toString(ErrorCodes.NO_DOM_ELEMENT_FOUND)\r\n        );\r\n    const mapId = await asyncExec(\"HMSMap\", \"showMap\", [divId]);\r\n    const currentMap: HuaweiMap | undefined = maps.get(mapId);\r\n    if (currentMap == undefined)\r\n        return Promise.reject(\r\n            ErrorCodes.toString(ErrorCodes.NO_DOM_ELEMENT_FOUND)\r\n        );\r\n    currentMap.startOverlayInterval();\r\n    currentMap.startObserver();\r\n    return currentMap;\r\n}\r\n\r\nexport async function hasPermission(): Promise<boolean> {\r\n    const json = await asyncExec(\"HMSMap\", \"hasPermission\", []);\r\n    return json.result;\r\n}\r\n\r\nexport async function requestPermission(): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"requestPermission\", []);\r\n}\r\n\r\nexport async function convertCoordinate(latLngObj: LatLngObj): Promise<LatLngObj> {\r\n    return asyncExec(\"HMSMap\", \"convertCoordinate\", [latLngObj]);\r\n}\r\n\r\nexport async function convertCoordinates(LatLngListObj: LatLngListObj): Promise<LatLngListObj[]> {\r\n    return asyncExec(\"HMSMap\", \"convertCoordinates\", [LatLngListObj]);\r\n}\r\n\r\nexport async function computeDistanceBetween(\r\n    from: LatLng,\r\n    to: LatLng\r\n): Promise<ComputeDistanceResult> {\r\n    return asyncExec(\"HMSMap\", \"computeDistanceBetween\", [\r\n        { from: from, to: to },\r\n    ]);\r\n}\r\n\r\nexport async function setApiKey(apiKey: string): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"setApiKey\", [{ apiKey: apiKey }]);\r\n}\r\n\r\nexport function initialize(routePolicy?:string): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"initialize\", [routePolicy]);\r\n}\r\n\r\nexport function disableLogger(): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"disableLogger\", []);\r\n}\r\n\r\nexport function enableLogger(): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"enableLogger\", []);\r\n}\r\n\r\n\r\n\r\nasync function forceUpdateXAndY(\r\n    x: number,\r\n    y: number,\r\n    mapDivId: string\r\n): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"forceUpdateXAndY\", [mapDivId, x, y]);\r\n}\r\n\r\nasync function forceUpdateWidthAndHeight(\r\n    width: number,\r\n    height: number,\r\n    mapDivId: string\r\n): Promise<void> {\r\n    return asyncExec(\"HMSMap\", \"forceUpdateWidthAndHeight\", [\r\n        mapDivId,\r\n        width,\r\n        height,\r\n    ]);\r\n}\r\n\r\ninterface OverlapState {\r\n    rect: Rect;\r\n    visited: boolean;\r\n    count: number;\r\n}\r\n\r\nclass MapOverlayCache {\r\n    private readonly mapDivId: string;\r\n    private readonly mapElement: HTMLElement;\r\n    private lastRectsRecord: Map<string, OverlapState> = new Map();\r\n    private rects: Map<string, OverlapState> = new Map();\r\n    private interval: number = -1;\r\n\r\n    constructor(mapDivId: string, mapElement: HTMLElement) {\r\n        this.mapDivId = mapDivId;\r\n        this.mapElement = mapElement;\r\n    }\r\n\r\n    private syncWithJava() {\r\n        /**\r\n         * Find and send the Rect information of added/updated/deleted HTML Elements which intersects with map.\r\n         */\r\n        let diffToAdd = [];\r\n        let diffToDelete = [];\r\n        for (let [key, value] of this.rects) {\r\n            if (!this.lastRectsRecord.has(key)) {\r\n                diffToAdd.push(value.rect);\r\n            } else {\r\n                this.lastRectsRecord.delete(key);\r\n            }\r\n        }\r\n\r\n        for (let [key, value] of this.lastRectsRecord) {\r\n            diffToDelete.push(value.rect);\r\n        }\r\n\r\n        if (diffToAdd.length > 0 || diffToDelete.length > 0) {\r\n            asyncExec(\"HMSMap\", \"updateOverlappingHTMLElements\", [\r\n                this.mapDivId,\r\n                diffToAdd,\r\n                diffToDelete,\r\n            ]);\r\n        }\r\n\r\n        this.lastRectsRecord.clear();\r\n        this.lastRectsRecord = new Map(this.rects);\r\n    }\r\n\r\n    private mapOverlayInterval() {\r\n        this.fillCacheRecursively(document.body);\r\n        this.refreshCache();\r\n        this.syncWithJava();\r\n    }\r\n    private refreshCache() {\r\n        for (let [key, value] of this.rects) {\r\n            if (!value.visited) {\r\n                this.removeRect(key, value);\r\n            } else {\r\n                value.visited = false;\r\n                this.rects.set(key, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    private removeRect(key: string, value: OverlapState) {\r\n        if (value.count > 1) {\r\n            value.count--;\r\n            this.rects.set(key, value);\r\n        } else {\r\n            this.rects.delete(key);\r\n        }\r\n    }\r\n\r\n    private fillCacheRecursively(element: HTMLElement) {\r\n        for (let i = 0; i < element.children.length; i++) {\r\n            this.fillCacheRecursively(<HTMLElement>element.children[i]);\r\n        }\r\n\r\n        if (element.id === this.mapDivId) return;\r\n        const curr: Rect = Rect.fromDomRect(element.getBoundingClientRect());\r\n        const map: Rect = Rect.fromDomRect(\r\n            this.mapElement.getBoundingClientRect()\r\n        );\r\n\r\n        if (map.intersects(curr) && this.isAboveMap(element)) {\r\n            let val = this.rects.get(curr.hashCode());\r\n\r\n            if (val == undefined) {\r\n                this.rects.set(curr.hashCode(), {\r\n                    rect: curr,\r\n                    visited: true,\r\n                    count: 1,\r\n                });\r\n            } else {\r\n                val.count = val.visited ? val.count + 1 : 1;\r\n                val.visited = true;\r\n                this.rects.set(curr.hashCode(), val);\r\n            }\r\n        }\r\n    }\r\n\r\n    private isAboveMap(element: HTMLElement): boolean {\r\n        const isParentOfMap =\r\n            element.compareDocumentPosition(this.mapElement) &\r\n            Node.DOCUMENT_POSITION_CONTAINED_BY;\r\n        const elemZIndex = window.getComputedStyle(element).zIndex;\r\n\r\n        if (\r\n            !Boolean(isParentOfMap) &&\r\n            !isNaN(parseInt(elemZIndex)) &&\r\n            parseInt(elemZIndex) > 0\r\n        )\r\n            return true;\r\n\r\n        const isMapCreatedBefore =\r\n            element.compareDocumentPosition(this.mapElement) &\r\n            Node.DOCUMENT_POSITION_PRECEDING;\r\n        return Boolean(isMapCreatedBefore);\r\n    }\r\n\r\n    startInterval() {\r\n        this.interval = setInterval(() => this.mapOverlayInterval(), 100);\r\n    }\r\n\r\n    stopInterval() {\r\n        if (this.interval !== -1) clearInterval(this.interval);\r\n    }\r\n}\r\n\r\nclass MapDomChangeListener {\r\n    private readonly mapDivId: string;\r\n    private readonly mapElement: HTMLElement;\r\n    private mapDomChangeObserver: MutationObserver;\r\n    private mapDivRectCache: DOMRect;\r\n\r\n    constructor(mapDivId: string, mapElement: HTMLElement) {\r\n        this.mapDivId = mapDivId;\r\n        this.mapElement = mapElement;\r\n        this.mapDivRectCache = this.mapElement.getBoundingClientRect();\r\n        this.mapDomChangeObserver = this.createObserver();\r\n    }\r\n\r\n    private addWindowResizeListener() {\r\n        window.onresize = () => {\r\n            this.updateWidthAndHeight();\r\n        };\r\n    }\r\n\r\n    private removeWindowResizeListener() {\r\n        window.onresize = null;\r\n    }\r\n\r\n    private createObserver(): MutationObserver {\r\n        return new MutationObserver((mutations) => {\r\n            this.updateXAndY();\r\n            this.updateWidthAndHeight();\r\n        });\r\n    }\r\n\r\n    startListener() {\r\n        this.mapDomChangeObserver.observe(document.body, {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true,\r\n        });\r\n        this.addWindowResizeListener();\r\n    }\r\n\r\n    stopListener() {\r\n        this.mapDomChangeObserver.disconnect();\r\n        this.removeWindowResizeListener();\r\n    }\r\n\r\n    private updateWidthAndHeight() {\r\n        const width = parseInt(\r\n            window\r\n                .getComputedStyle(this.mapElement, null)\r\n                .getPropertyValue(\"width\")\r\n        );\r\n        const height = parseInt(\r\n            window\r\n                .getComputedStyle(this.mapElement, null)\r\n                .getPropertyValue(\"height\")\r\n        );\r\n        if (\r\n            this.mapDivRectCache.width != width ||\r\n            this.mapDivRectCache.height != height\r\n        ) {\r\n            forceUpdateWidthAndHeight(width, height, this.mapDivId).then(() => {\r\n                this.mapDivRectCache.width = width;\r\n                this.mapDivRectCache.height = height;\r\n            });\r\n        }\r\n    }\r\n\r\n    private updateXAndY() {\r\n        const mapRect = this.mapElement.getBoundingClientRect();\r\n        const x = mapRect.x;\r\n        const y = mapRect.y;\r\n        if (this.mapDivRectCache.x != x || this.mapDivRectCache.y != y) {\r\n            forceUpdateXAndY(x, y, this.mapDivId).then(() => {\r\n                this.mapDivRectCache.x = x;\r\n                this.mapDivRectCache.y = y;\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nclass HuaweiMapImpl implements HuaweiMap {\r\n    public readonly components: Map<string, any> = new Map<string, any>();\r\n    private readonly id: number;\r\n    private readonly divId: string;\r\n    private readonly uiSettings: UiSettings;\r\n    private readonly projection: Projection;\r\n    private readonly mapElement: HTMLElement;\r\n    private readonly overlay: MapOverlayCache;\r\n    private readonly mapListener: MapDomChangeListener;\r\n\r\n    constructor(divId: string, mapId: number) {\r\n        console.log(\r\n            `Huawei map constructed with the div id ${divId} :: and the props ${mapId}`\r\n        );\r\n        this.id = mapId;\r\n        this.divId = divId;\r\n        this.projection = new ProjectionImpl(divId);\r\n        this.uiSettings = new UiSettingsImpl(divId);\r\n\r\n        const tempElement: HTMLElement | null = document.getElementById(\r\n            this.divId\r\n        );\r\n        if (tempElement == null)\r\n            throw Error(`Specified map div could not find: ${divId}`);\r\n        this.mapElement = tempElement;\r\n        this.overlay = new MapOverlayCache(divId, this.mapElement);\r\n        this.mapListener = new MapDomChangeListener(divId, this.mapElement);\r\n        this.startOverlayInterval();\r\n        this.startObserver();\r\n    }\r\n\r\n    startOverlayInterval(): void {\r\n        this.overlay.startInterval();\r\n    }\r\n\r\n    startObserver(): void {\r\n        this.mapListener.startListener();\r\n    }\r\n\r\n    // IONIC FRAMEWORK SCROLL EVENT\r\n    scroll(): void {\r\n        if (this.mapElement == null) return;\r\n        const mapRect = this.mapElement.getBoundingClientRect();\r\n        forceUpdateXAndY(mapRect.x, mapRect.y, this.divId);\r\n    }\r\n\r\n    syncDimensions(): void {\r\n        if (this.mapElement == null) return;\r\n        const width = parseInt(\r\n            window\r\n                .getComputedStyle(this.mapElement, null)\r\n                .getPropertyValue(\"width\")\r\n        );\r\n        const height = parseInt(\r\n            window\r\n                .getComputedStyle(this.mapElement, null)\r\n                .getPropertyValue(\"height\")\r\n        );\r\n        forceUpdateWidthAndHeight(width, height, this.divId);\r\n    }\r\n\r\n    async destroyMap(): Promise<void> {\r\n        this.components.clear();\r\n        maps.delete(this.id);\r\n        this.overlay.stopInterval();\r\n        this.mapListener.stopListener();\r\n        return asyncExec(\"HMSMap\", \"destroyMap\", [this.divId]);\r\n    }\r\n\r\n    async hideMap(): Promise<void> {\r\n        this.overlay.stopInterval();\r\n        this.mapListener.startListener();\r\n        return asyncExec(\"HMSMap\", \"hideMap\", [this.divId]);\r\n    }\r\n\r\n    async on(event: MapEvent, callback: (val: any) => void): Promise<void> {\r\n        const fixedFunctionNameForJavaScript: string = `${event}_${this.id}`;\r\n        const fixedFunctionNameForJava: string = `set${event[0].toUpperCase()}${event.substr(\r\n            1\r\n        )}Listener`;\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.divId,\r\n            \"setListener\",\r\n            fixedFunctionNameForJava,\r\n            { content: callback.toString() },\r\n        ])\r\n            .then((value) => {\r\n                window.subscribeHMSEvent(\r\n                    fixedFunctionNameForJavaScript,\r\n                    callback\r\n                );\r\n            })\r\n            .catch((err) => console.log(err));\r\n    }\r\n\r\n    async setMapPointersEnabled(mapPointersEnabled: boolean): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"setMapPointersEnabled\", [\r\n            this.divId,\r\n            mapPointersEnabled,\r\n        ]);\r\n    }\r\n\r\n    async isMapPointersEnabled(): Promise<boolean> {\r\n        const json = await asyncExec(\"HMSMap\", \"isMapPointersEnabled\", [\r\n            this.divId,\r\n        ]);\r\n        return json.result;\r\n    }\r\n\r\n    async addCircle(circleOptions: CircleOptions): Promise<Circle> {\r\n        if (!circleOptions[\"center\"])\r\n            return Promise.reject(\r\n                ErrorCodes.toString(ErrorCodes.CENTER_PROPERTY_MUST_DEFINED)\r\n            );\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"CIRCLE\",\r\n            circleOptions,\r\n        ]);\r\n        const circle: Circle = new CircleImpl(this.divId, this.id, componentId);\r\n        this.components.set(circle.getId(), circle);\r\n        return circle;\r\n    }\r\n\r\n    async addHeatMap(heatMapOptions: HeatMapOptions): Promise<HeatMap> {\r\n        if (!heatMapOptions[\"dataset\"])\r\n            return Promise.reject(\r\n                ErrorCodes.toString(ErrorCodes.CENTER_PROPERTY_MUST_DEFINED)\r\n            );\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"HEAT_MAP\",\r\n            heatMapOptions,\r\n        ]);\r\n        const heat_map: HeatMap = new HeatMapImpl(\r\n            this.divId,\r\n            this.id,\r\n            componentId\r\n        );\r\n        this.components.set(heat_map.getId(), heat_map);\r\n        return heat_map;\r\n    }\r\n\r\n    async addMarker(markerOptions: MarkerOptions): Promise<Marker> {\r\n        if (!markerOptions[\"position\"])\r\n            return Promise.reject(\r\n                ErrorCodes.toString(ErrorCodes.POSITION_PROPERTY_MUST_DEFINED)\r\n            );\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"MARKER\",\r\n            markerOptions,\r\n        ]);\r\n        const marker: Marker = new MarkerImpl(this.divId, this.id, componentId);\r\n        this.components.set(marker.getId(), marker);\r\n        return marker;\r\n    }\r\n\r\n    async addGroundOverlay(\r\n        groundOverlayOptions: GroundOverlayOptions\r\n    ): Promise<GroundOverlay> {\r\n        if (!groundOverlayOptions[\"position\"])\r\n            return Promise.reject(\r\n                ErrorCodes.toString(ErrorCodes.POSITION_PROPERTY_MUST_DEFINED)\r\n            );\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"GROUND_OVERLAY\",\r\n            groundOverlayOptions,\r\n        ]);\r\n        const groundOverlay: GroundOverlay = new GroundOverlayImpl(\r\n            this.divId,\r\n            this.id,\r\n            componentId\r\n        );\r\n        this.components.set(groundOverlay.getId(), groundOverlay);\r\n        return groundOverlay;\r\n    }\r\n\r\n    async addTileOverlay(\r\n        tileOverlayOptions: TileOverlayOptions\r\n    ): Promise<TileOverlay> {\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"TILE_OVERLAY\",\r\n            tileOverlayOptions,\r\n        ]);\r\n        const tileOverlay: TileOverlay = new TileOverlayImpl(\r\n            this.divId,\r\n            this.id,\r\n            componentId\r\n        );\r\n        this.components.set(tileOverlay.getId(), tileOverlay);\r\n        return tileOverlay;\r\n    }\r\n\r\n    async addPolygon(polygonOptions: PolygonOptions): Promise<Polygon> {\r\n        if (!polygonOptions[\"points\"])\r\n            return Promise.reject(\r\n                ErrorCodes.toString(ErrorCodes.POINTS_PROPERTY_MUST_DEFINED)\r\n            );\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"POLYGON\",\r\n            polygonOptions,\r\n        ]);\r\n        const polygon: Polygon = new PolygonImpl(\r\n            this.divId,\r\n            this.id,\r\n            componentId\r\n        );\r\n        this.components.set(polygon.getId(), polygon);\r\n        return polygon;\r\n    }\r\n\r\n    async addPolyline(polylineOptions: PolylineOptions): Promise<Polyline> {\r\n        if (!polylineOptions[\"points\"])\r\n            return Promise.reject(\r\n                ErrorCodes.toString(ErrorCodes.POINTS_PROPERTY_MUST_DEFINED)\r\n            );\r\n        const componentId = await asyncExec(\"HMSMap\", \"addComponent\", [\r\n            this.divId,\r\n            \"POLYLINE\",\r\n            polylineOptions,\r\n        ]);\r\n        const polyline: Polyline = new PolylineImpl(\r\n            this.divId,\r\n            this.id,\r\n            componentId\r\n        );\r\n        this.components.set(polyline.getId(), polyline);\r\n        return polyline;\r\n    }\r\n\r\n    animateCamera(cameraUpdate: CameraUpdate): Promise<void>;\r\n    animateCamera(\r\n        cameraUpdate: CameraUpdate,\r\n        cancelableCallback: CancelableCallback\r\n    ): Promise<void>;\r\n    animateCamera(\r\n        cameraUpdate: CameraUpdate,\r\n        cancelableCallback?: CancelableCallback,\r\n        durationMs?: number\r\n    ): Promise<void> {\r\n        const onFinishEventForJavascript = `${MapEvent.ON_CANCELABLE_CALLBACK_FINISH}_${this.id}`;\r\n        const onCancelEventForJavascript = `${MapEvent.ON_CANCELABLE_CALLBACK_CANCEL}_${this.id}`;\r\n        const props: any = {};\r\n        if (cancelableCallback != undefined) {\r\n            window.subscribeHMSEvent(\r\n                onFinishEventForJavascript,\r\n                cancelableCallback.onFinish\r\n            );\r\n            window.subscribeHMSEvent(\r\n                onCancelEventForJavascript,\r\n                cancelableCallback.onCancel\r\n            );\r\n            if (cancelableCallback.onFinish != undefined)\r\n                props[\"isOnFinish\"] = true;\r\n            if (cancelableCallback.onCancel != undefined)\r\n                props[\"isOnCancel\"] = true;\r\n            if (durationMs) props[\"duration\"] = durationMs;\r\n        }\r\n        return (<CameraUpdateImpl>cameraUpdate).animateCamera(\r\n            this.divId,\r\n            props\r\n        );\r\n    }\r\n\r\n    moveCamera(cameraUpdate: CameraUpdate): Promise<void> {\r\n        return (<CameraUpdateImpl>cameraUpdate).moveCamera(this.divId);\r\n    }\r\n\r\n    clear(): Promise<void> {\r\n        this.components.clear();\r\n        return this.getHuaweiMapOptions(\"clear\");\r\n    }\r\n\r\n    resetMinMaxZoomPreference(): Promise<void> {\r\n        return this.getHuaweiMapOptions(\"resetMinMaxZoomPreference\");\r\n    }\r\n\r\n    stopAnimation(): Promise<void> {\r\n        return this.getHuaweiMapOptions(\"stopAnimation\");\r\n    }\r\n\r\n    getCameraPosition(): Promise<CameraPosition> {\r\n        return this.getHuaweiMapOptions(\"getCameraPosition\");\r\n    }\r\n\r\n    getMapType(): Promise<MapType> {\r\n        return this.getHuaweiMapOptions(\"getMapType\");\r\n    }\r\n\r\n    getMaxZoomLevel(): Promise<number> {\r\n        return this.getHuaweiMapOptions(\"getMaxZoomLevel\");\r\n    }\r\n\r\n    getMinZoomLevel(): Promise<number> {\r\n        return this.getHuaweiMapOptions(\"getMinZoomLevel\");\r\n    }\r\n\r\n    getProjection() {\r\n        return this.projection;\r\n    }\r\n\r\n    getUiSettings(): UiSettings {\r\n        return this.uiSettings;\r\n    }\r\n\r\n    getScalePerPixel(): Promise<number> {\r\n        return this.getHuaweiMapOptions(\"getScalePerPixel\");\r\n    }\r\n\r\n    getMyLocationStyle(): Promise<MyLocationStyle> {\r\n        return this.getHuaweiMapOptions(\"getMyLocationStyle\");\r\n    }\r\n\r\n    isBuildingsEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions(\"isBuildingsEnabled\");\r\n    }\r\n\r\n    isDark(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions(\"isDark\");\r\n    }\r\n\r\n    isMyLocationEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions(\"isMyLocationEnabled\");\r\n    }\r\n\r\n    isTrafficEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions(\"isTrafficEnabled\");\r\n    }\r\n\r\n    isIndoorEnabled(): Promise<boolean> {\r\n        return this.getHuaweiMapOptions(\"isIndoorEnabled\");\r\n    }\r\n\r\n    setBuildingsEnabled(buildingsEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setBuildingsEnabled\", {\r\n            buildingsEnabled: buildingsEnabled,\r\n        });\r\n    }\r\n\r\n    setDarkEnabled(darkEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setDarkEnabled\", {\r\n            darkEnabled: darkEnabled,\r\n        });\r\n    }\r\n\r\n    setContentDescription(contentDescription: string): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setContentDescription\", {\r\n            contentDescription: contentDescription,\r\n        });\r\n    }\r\n\r\n    setInfoWindowAdapter(infoWindowAdapter: InfoWindowAdapter): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setInfoWindowAdapter\", {\r\n            infoWindowAdapter: infoWindowAdapter,\r\n        });\r\n    }\r\n\r\n    setLatLngBoundsForCameraTarget(latLngBounds: LatLngBounds): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setLatLngBoundsForCameraTarget\", {\r\n            latLngBounds: latLngBounds,\r\n        });\r\n    }\r\n\r\n    setLocationSource(locationSource: LocationSource): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setLocationSource\", {\r\n            locationSource: locationSource,\r\n        });\r\n    }\r\n\r\n    setMapStyle(mapStyle: MapStyleOptions): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMapStyle\", {\r\n            mapStyle: mapStyle.getResourceName(),\r\n        });\r\n    }\r\n\r\n    setMapType(mapType: MapType): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMapType\", { mapType: mapType });\r\n    }\r\n\r\n    setMarkersClustering(markersClustering: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMarkersClustering\", {\r\n            markersClustering: markersClustering,\r\n        });\r\n    }\r\n\r\n    setMaxZoomPreference(maxZoomPreference: number): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMaxZoomPreference\", {\r\n            maxZoomPreference: maxZoomPreference,\r\n        });\r\n    }\r\n\r\n    setMinZoomPreference(minZoomPreference: number): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMinZoomPreference\", {\r\n            minZoomPreference: minZoomPreference,\r\n        });\r\n    }\r\n\r\n    setMyLocationEnabled(myLocationEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMyLocationEnabled\", {\r\n            myLocationEnabled: myLocationEnabled,\r\n        });\r\n    }\r\n\r\n    setPadding(\r\n        left: number,\r\n        top: number,\r\n        right: number,\r\n        bottom: number\r\n    ): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setPadding\", {\r\n            left: left,\r\n            top: top,\r\n            right: right,\r\n            bottom: bottom,\r\n        });\r\n    }\r\n\r\n    setTrafficEnabled(trafficEnabled: boolean): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setTrafficEnabled\", {\r\n            trafficEnabled: trafficEnabled,\r\n        });\r\n    }\r\n\r\n    setPointToCenter(x: number, y: number): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setPointToCenter\", { x: x, y: y });\r\n    }\r\n\r\n    setStyleId(styleId: string): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setStyleId\", { styleId: styleId });\r\n    }\r\n\r\n    previewId(previewId: string): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"previewId\", { previewId: previewId });\r\n    }\r\n\r\n    setMyLocationStyle(style: MyLocationStyle): Promise<void> {\r\n        return this.setHuaweiMapOptions(\"setMyLocationStyle\", { style: style });\r\n    }\r\n\r\n    getComponent(key: string): any {\r\n        return this.components.get(key);\r\n    }\r\n\r\n    getId(): number {\r\n        return this.id;\r\n    }\r\n\r\n    snapshot(\r\n        onReadyCallback: (snapshot: SnapshotResult) => void\r\n    ): Promise<void> {\r\n        const eventName = `${MapEvent.ON_SNAPSHOT_READY_CALLBACK}_${this.id}`;\r\n        window.subscribeHMSEvent(eventName, onReadyCallback);\r\n        return this.getHuaweiMapOptions(\"snapshot\");\r\n    }\r\n\r\n    // INTERNAL INTERNAL INTERNAL\r\n    removeComponent(key: string): void {\r\n        if (this.components.has(key)) {\r\n            this.components.get(key).remove();\r\n            this.components.delete(key);\r\n        } else {\r\n            throw ErrorCodes.toString(ErrorCodes.NO_COMPONENT_EXISTS_GIVEN_ID);\r\n        }\r\n    }\r\n\r\n    private setHuaweiMapOptions(func: string, props: any): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.divId,\r\n            \"setHuaweiMapOptions\",\r\n            func,\r\n            props,\r\n        ]);\r\n    }\r\n\r\n    private async getHuaweiMapOptions(func: string): Promise<any> {\r\n        const result = await asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.divId,\r\n            \"getHuaweiMapOptions\",\r\n            func,\r\n            {},\r\n        ]);\r\n        return result.value;\r\n    }\r\n}\r\n\r\nclass UiSettingsImpl implements UiSettings {\r\n    private readonly mapDivId: string;\r\n\r\n    constructor(mapDivId: string) {\r\n        this.mapDivId = mapDivId;\r\n    }\r\n\r\n    isCompassEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isCompassEnabled\");\r\n    }\r\n\r\n    isIndoorLevelPickerEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isIndoorLevelPickerEnabled\");\r\n    }\r\n\r\n    isMapToolbarEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isMapToolbarEnabled\");\r\n    }\r\n\r\n    isMyLocationButtonEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isMyLocationButtonEnabled\");\r\n    }\r\n\r\n    isRotateGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isRotateGesturesEnabled\");\r\n    }\r\n\r\n    isScrollGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isScrollGesturesEnabled\");\r\n    }\r\n\r\n    isScrollGesturesEnabledDuringRotateOrZoom(): Promise<boolean> {\r\n        return this.getUiSettings(\"isScrollGesturesEnabledDuringRotateOrZoom\");\r\n    }\r\n\r\n    isTiltGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isTiltGesturesEnabled\");\r\n    }\r\n\r\n    isZoomControlsEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isZoomControlsEnabled\");\r\n    }\r\n\r\n    isZoomGesturesEnabled(): Promise<boolean> {\r\n        return this.getUiSettings(\"isZoomGesturesEnabled\");\r\n    }\r\n\r\n    setAllGesturesEnabled(allGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setAllGesturesEnabled\", {\r\n            allGesturesEnabled: allGesturesEnabled,\r\n        });\r\n    }\r\n\r\n    setCompassEnabled(compassEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setCompassEnabled\", {\r\n            compassEnabled: compassEnabled,\r\n        });\r\n    }\r\n\r\n    setIndoorLevelPickerEnabled(\r\n        indoorLevelPickerEnabled: boolean\r\n    ): Promise<void> {\r\n        return this.setUiSettings(\"setIndoorLevelPickerEnabled\", {\r\n            indoorLevelPickerEnabled: indoorLevelPickerEnabled,\r\n        });\r\n    }\r\n\r\n    setMapToolbarEnabled(mapToolbarEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setMapToolbarEnabled\", {\r\n            mapToolbarEnabled: mapToolbarEnabled,\r\n        });\r\n    }\r\n\r\n    setMyLocationButtonEnabled(\r\n        myLocationButtonEnabled: boolean\r\n    ): Promise<void> {\r\n        return this.setUiSettings(\"setMyLocationButtonEnabled\", {\r\n            myLocationButtonEnabled: myLocationButtonEnabled,\r\n        });\r\n    }\r\n\r\n    setRotateGesturesEnabled(rotateGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setRotateGesturesEnabled\", {\r\n            rotateGesturesEnabled: rotateGesturesEnabled,\r\n        });\r\n    }\r\n\r\n    setScrollGesturesEnabled(scrollGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setScrollGesturesEnabled\", {\r\n            scrollGesturesEnabled: scrollGesturesEnabled,\r\n        });\r\n    }\r\n\r\n    setScrollGesturesEnabledDuringRotateOrZoom(\r\n        scrollGesturesEnabledDuringRotateOrZoom: boolean\r\n    ): Promise<void> {\r\n        return this.setUiSettings(\r\n            \"setScrollGesturesEnabledDuringRotateOrZoom\",\r\n            {\r\n                scrollGesturesEnabledDuringRotateOrZoom:\r\n                    scrollGesturesEnabledDuringRotateOrZoom,\r\n            }\r\n        );\r\n    }\r\n\r\n    setTiltGesturesEnabled(tiltGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setTiltGesturesEnabled\", {\r\n            tiltGesturesEnabled: tiltGesturesEnabled,\r\n        });\r\n    }\r\n\r\n    setZoomControlsEnabled(zoomControlsEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setZoomControlsEnabled\", {\r\n            zoomControlsEnabled: zoomControlsEnabled,\r\n        });\r\n    }\r\n\r\n    setZoomGesturesEnabled(zoomGesturesEnabled: boolean): Promise<void> {\r\n        return this.setUiSettings(\"setZoomGesturesEnabled\", {\r\n            zoomGesturesEnabled: zoomGesturesEnabled,\r\n        });\r\n    }\r\n\r\n    setGestureScaleByMapCenter(\r\n        gestureScaleByMapCenterEnabled: boolean\r\n    ): Promise<void> {\r\n        return this.setUiSettings(\"setGestureScaleByMapCenter\", {\r\n            gestureScaleByMapCenterEnabled: gestureScaleByMapCenterEnabled,\r\n        });\r\n    }\r\n\r\n    setMarkerClusterColor(markerClusterColor: number): Promise<void> {\r\n        return this.setUiSettings(\"setMarkerClusterColor\", {\r\n            markerClusterColor: markerClusterColor,\r\n        });\r\n    }\r\n\r\n    setMarkerClusterIcon(markerClusterIcon: BitmapDescriptor): Promise<void> {\r\n        return this.setUiSettings(\"setMarkerClusterIcon\", {\r\n            markerClusterIcon: markerClusterIcon,\r\n        });\r\n    }\r\n\r\n    setMarkerClusterTextColor(markerClusterTextColor: number): Promise<void> {\r\n        return this.setUiSettings(\"setMarkerClusterTextColor\", {\r\n            markerClusterTextColor: markerClusterTextColor,\r\n        });\r\n    }\r\n\r\n    setLogoPosition(logoPosition: number): Promise<void> {\r\n        return this.setUiSettings(\"setLogoPosition\", {\r\n            logoPosition: logoPosition,\r\n        });\r\n    }\r\n\r\n    setLogoPadding(\r\n        paddingStart: number,\r\n        paddingTop: number,\r\n        paddingEnd: number,\r\n        paddingBottom: number\r\n    ): Promise<void> {\r\n        return this.setUiSettings(\"setLogoPadding\", {\r\n            paddingStart: paddingStart,\r\n            paddingTop: paddingTop,\r\n            paddingEnd: paddingEnd,\r\n            paddingBottom: paddingBottom,\r\n        });\r\n    }\r\n\r\n    private setUiSettings(func: string, props: any): Promise<void> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.mapDivId,\r\n            \"setUiSettings\",\r\n            func,\r\n            props,\r\n        ]);\r\n    }\r\n\r\n    private async getUiSettings(func: string) {\r\n        const result = await asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.mapDivId,\r\n            \"getUiSettings\",\r\n            func,\r\n            {},\r\n        ]);\r\n        return result.value;\r\n    }\r\n}\r\n\r\nclass CameraUpdateImpl implements CameraUpdate {\r\n    props: any;\r\n    event: string = \"\";\r\n\r\n    moveCamera(mapId: string): Promise<any> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            mapId,\r\n            \"moveCamera\",\r\n            this.event,\r\n            this.props,\r\n        ]);\r\n    }\r\n\r\n    animateCamera(mapId: string, props: any): Promise<any> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            mapId,\r\n            \"animateCamera\",\r\n            this.event,\r\n            { ...this.props, ...props },\r\n        ]);\r\n    }\r\n}\r\n\r\nexport class CameraUpdateFactory {\r\n    private constructor() { }\r\n\r\n    static newCameraPosition(cameraPosition: CameraPosition): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"newCameraPosition\", {\r\n            cameraPosition: cameraPosition,\r\n        });\r\n    }\r\n\r\n    static newLatLng(latLng: LatLng): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"newLatLng\", { latLng: latLng });\r\n    }\r\n\r\n    static newLatLngBounds(\r\n        latLngBounds: LatLngBounds,\r\n        padding: number\r\n    ): CameraUpdate;\r\n\r\n    static newLatLngBounds(\r\n        latLngBounds: LatLngBounds,\r\n        padding: number,\r\n        width?: number,\r\n        height?: number\r\n    ): CameraUpdate {\r\n        let props: any = {};\r\n        props[\"bounds\"] = latLngBounds;\r\n        props[\"padding\"] = padding;\r\n        if (width && height) {\r\n            props[\"width\"] = width;\r\n            props[\"height\"] = height;\r\n        }\r\n        return this.constructCameraUpdateImpl(\"newLatLngBounds\", props);\r\n    }\r\n\r\n    static newLatLngZoom(latLng: LatLng, zoom: number): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"newLatLngZoom\", {\r\n            latLng: latLng,\r\n            zoom: zoom,\r\n        });\r\n    }\r\n\r\n    static scrollBy(xPixel: number, yPixel: number): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"scrollBy\", {\r\n            xPixel: xPixel,\r\n            yPixel: yPixel,\r\n        });\r\n    }\r\n\r\n    static zoomBy(amount: number): CameraUpdate;\r\n\r\n    static zoomBy(amount: number, focus?: Point): CameraUpdate {\r\n        let props: any = {};\r\n        props[\"amount\"] = amount;\r\n        if (focus) props[\"focus\"] = focus;\r\n        return this.constructCameraUpdateImpl(\"zoomBy\", props);\r\n    }\r\n\r\n    static zoomIn(): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"zoomIn\", {});\r\n    }\r\n\r\n    static zoomOut(): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"zoomOut\", {});\r\n    }\r\n\r\n    static zoomTo(zoom: number): CameraUpdate {\r\n        return this.constructCameraUpdateImpl(\"zoomTo\", { zoom: zoom });\r\n    }\r\n\r\n    private static constructCameraUpdateImpl(\r\n        event: string,\r\n        props: any\r\n    ): CameraUpdateImpl {\r\n        let cameraUpdate = new CameraUpdateImpl();\r\n        cameraUpdate.event = event;\r\n        cameraUpdate.props = props;\r\n        return cameraUpdate;\r\n    }\r\n}\r\n\r\nclass ProjectionImpl implements Projection {\r\n    private readonly divId: string;\r\n\r\n    constructor(divId: string) {\r\n        this.divId = divId;\r\n    }\r\n\r\n    fromScreenLocation(point: Point): Promise<LatLng> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.divId,\r\n            \"projections\",\r\n            \"fromScreenLocation\",\r\n            { point: point },\r\n        ]);\r\n    }\r\n\r\n    getVisibleRegion(): Promise<VisibleRegion> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.divId,\r\n            \"projections\",\r\n            \"getVisibleRegion\",\r\n            {},\r\n        ]);\r\n    }\r\n\r\n    toScreenLocation(latLng: LatLng): Promise<Point> {\r\n        return asyncExec(\"HMSMap\", \"mapOptions\", [\r\n            this.divId,\r\n            \"projections\",\r\n            \"toScreenLocation\",\r\n            { latLng: latLng },\r\n        ]);\r\n    }\r\n}\r\n\r\nexport class MapStyleOptions {\r\n    private readonly resourceName: string;\r\n\r\n    private constructor(resourceName: string) {\r\n        this.resourceName = resourceName;\r\n    }\r\n\r\n    public static loadRawResourceStyle(resourceName: string): MapStyleOptions {\r\n        return new MapStyleOptions(resourceName);\r\n    }\r\n\r\n    getResourceName(): string {\r\n        return this.resourceName;\r\n    }\r\n}\r\n"]}